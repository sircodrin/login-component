@import dot.cpp.login.enums.UserRole
@import dot.cpp.login.models.user.request.InviteUserRequest
@import dot.cpp.login.views.html.main
@import dot.cpp.repository.constants.Patterns
@import play.mvc.Http.Request
@(
        form: play.data.Form[InviteUserRequest]
)(implicit request: Request, messages: play.i18n.Messages)

@main("Set admin password") {
    <div class="login">
        <div class="w-100 h-100 d-flex align-items-center justify-content-center">
            <div class="box">

                <h1 class="title">Invite User</h1>
                <p class="subtitle">Please provide the email address of the user.</p>

                @* Flash shows updates to a page *@
                @request.flash.asScala().data.map { case (name, value) =>
                <div class="alert @name">@value</div>
                }

                @helper.form(action = dot.cpp.login.controllers.routes.UserController.inviteUser()) {
                    <label>Email Address</label>
                    @helper.inputText(
                        field = form("email"),
                        Symbol("id") -> "email",
                        Symbol("required") -> "required",
                        Symbol("pattern") -> Patterns.EMAIL
                    )
                    @helper.select(
                        field = form("role"),
                        options = UserRole.values().map(v => (v.toString, v.getValue)).toSeq,
                        Symbol("required") -> "required"
                    )
                    <div class="alert-box">
                        <div id='message' class="alert alert-danger" hidden>
                            <span>The inputted email address is invalid!</span>
                        </div>
                    </div>
                    <button class="cta" type="submit" id="submitButton">Send invite</button>
                }
            </div>
        </div>
    </div>
}

<script src="@routes.Assets.versioned("javascript/set-password-validation.js")" type="text/javascript"></script>
